#!/bin/bash

# Initialize conda for bash
eval "$(/home/ivieira/mambaforge/bin/conda shell.bash hook)"

# Set up conda/mamba environment paths
export PATH="/home/ivieira/mambaforge/bin:$PATH"
export CONDA_EXE="/home/ivieira/mambaforge/bin/conda"
export CONDA_PYTHON_EXE="/home/ivieira/mambaforge/bin/python"
export CONDA_SHLVL="1"

# Initialize conda
source /home/ivieira/mambaforge/etc/profile.d/conda.sh

# Create the environment if it doesn't exist
if ! conda env list | grep -q "my-pip-env"; then
    conda create -n my-pip-env python=3.8 -y
fi

# Activate the environment
conda activate my-pip-env

# Install required packages
pip install --no-cache-dir sacrebleu
pip install --no-cache-dir torch
pip install --no-cache-dir ctranslate2==4.3.1

# Set up MLflow
export MLFLOW_TRACKING_URI="file:///home/ivieira/chicago2/mlruns"
export MLFLOW_EXPERIMENT_NAME="adobe_training_inference_evaluation"

# Run your Python script
python sage_train_inf_eval.py




